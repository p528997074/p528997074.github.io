<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ACL访问控制列表 | 学无止境</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="ACL访问控制列表在第三层，对数据包进行过滤 ACL：规则集 两种类型标准ACL：检查源地址，通常允许或拒绝的是完整的协议。 扩展ACL：检查源地址和目的地址，通常允许或拒绝的是某个特定的协议。 两个方向in：进站 out：出站 标准ACL：通常应用到离目标最近的端口。 扩展ACL：通常应用到离源最近的端口。 看数据包的流向，方向为进（in），方向为出（out）。 两个动作deny：拒绝 perm">
<meta property="og:type" content="article">
<meta property="og:title" content="ACL访问控制列表">
<meta property="og:url" content="http://yoursite.com/2020/02/03/ACL%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8/index.html">
<meta property="og:site_name" content="学无止境">
<meta property="og:description" content="ACL访问控制列表在第三层，对数据包进行过滤 ACL：规则集 两种类型标准ACL：检查源地址，通常允许或拒绝的是完整的协议。 扩展ACL：检查源地址和目的地址，通常允许或拒绝的是某个特定的协议。 两个方向in：进站 out：出站 标准ACL：通常应用到离目标最近的端口。 扩展ACL：通常应用到离源最近的端口。 看数据包的流向，方向为进（in），方向为出（out）。 两个动作deny：拒绝 perm">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-02-03T08:15:33.196Z">
<meta property="article:modified_time" content="2020-02-03T06:43:33.585Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="学无止境" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main"><article id="post-ACL访问控制列表" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      ACL访问控制列表
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/02/03/ACL%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8/" class="article-date">
  <time datetime="2020-02-03T08:15:33.196Z" itemprop="datePublished">2020-02-03</time>
</a>
    
    
  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="ACL访问控制列表"><a href="#ACL访问控制列表" class="headerlink" title="ACL访问控制列表"></a>ACL访问控制列表</h1><p>在第三层，对数据包进行过滤</p>
<p>ACL：规则集</p>
<h2 id="两种类型"><a href="#两种类型" class="headerlink" title="两种类型"></a>两种类型</h2><p>标准ACL：检查源地址，通常允许或拒绝的是完整的协议。</p>
<p>扩展ACL：检查源地址和目的地址，通常允许或拒绝的是某个特定的协议。</p>
<h2 id="两个方向"><a href="#两个方向" class="headerlink" title="两个方向"></a>两个方向</h2><p>in：进站</p>
<p>out：出站</p>
<p>标准ACL：通常应用到离目标最近的端口。</p>
<p>扩展ACL：通常应用到离源最近的端口。</p>
<p>看数据包的流向，方向为进（in），方向为出（out）。</p>
<h2 id="两个动作"><a href="#两个动作" class="headerlink" title="两个动作"></a>两个动作</h2><p>deny：拒绝</p>
<p>permit：允许</p>
<p>两种命名方式：</p>
<p>名称方式：</p>
<p>standard：（标准ACL）</p>
<p>extended：（扩展ACL）</p>
<p>编号命名：</p>
<p>标准ACL：1-99</p>
<p>扩展ACL：100-199，2000-2699</p>
<p>默认拒绝所有的。</p>
<p>执行顺序：从上至下，一旦匹配，不再往下执行。</p>
<h2 id="反掩码"><a href="#反掩码" class="headerlink" title="反掩码"></a>反掩码</h2><p>不确定有没有划分子网掩码</p>
<p>255.255.255.255-255.255.255.0（子网掩码）=0.0.0.255</p>
<p>前三个0代表精确匹配</p>
<h2 id="案例一：拒绝学生宿舍访问财务室网络。"><a href="#案例一：拒绝学生宿舍访问财务室网络。" class="headerlink" title="案例一：拒绝学生宿舍访问财务室网络。"></a>案例一：拒绝学生宿舍访问财务室网络。</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">判断是用标准ACL还是用扩展ACL？</span><br><span class="line">       根据要求意思是拒绝整个学生宿舍的网络，就应该用标准ACL。</span><br><span class="line">       搞清楚ACL应该做在哪个路由器上？标准ACL应做在离目标最近的端口。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      第一步：设置ACL规则（名称方式命名）</span><br><span class="line">             R2(config)#ip access-list standard ACL1    做一个标准ACL名字叫ACL1</span><br><span class="line">             R2(config-std-nacl)#deny 192.168.10.0 0.0.0.255   拒绝学生宿舍网络，用反掩码精确匹配</span><br><span class="line">             如何查看？R2#sh ip access-lists</span><br><span class="line">      第二步：应用ACL规则（思考应用到哪个端口？）</span><br><span class="line">             标准ACL应做在离目标最近的端口，方向为out。</span><br><span class="line">             R2(config)#int f0&#x2F;0</span><br><span class="line">             R2(config-if)#ip access-group ACL1 out</span><br><span class="line">             R2#sh running-config</span><br><span class="line">      第三步：验证ACL是否正确？</span><br><span class="line"></span><br><span class="line">      如果要修改ACL？</span><br><span class="line">             R2(config)#ip access-list standard ACL1   进入到ACL规则集</span><br><span class="line">             R2(config-std-nacl)#permit any     添加规则</span><br><span class="line">             R2(config-std-nacl)#no 20      删除编号为20的规则</span><br><span class="line">             R2(config)#no ip access-list standard ACL1   删除名为ACL1的规则集</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      如果用编号方式做ACL规则？</span><br><span class="line">             R2(config)#access-list 10 deny 192.168.10.0 0.0.0.255</span><br><span class="line">             R2(config)#access-list 10 permit any</span><br><span class="line">             删除规则：R2(config)#ip access-list standard 10</span><br><span class="line">                      R2(config-std-nacl)#no 20</span><br><span class="line">             删除整个规则集：R2(config)#no access-list 10</span><br><span class="line"></span><br><span class="line">             R2(config)#int f0&#x2F;0</span><br><span class="line">             R2(config-if)#ip access-group 10 out</span><br></pre></td></tr></table></figure></div>

<p>eq等于</p>
<p>gt大于</p>
<p>lt小于</p>
<p>neg不等于</p>
<p>range包含</p>
<h2 id="案例二：拒绝学生宿舍访问www服务。"><a href="#案例二：拒绝学生宿舍访问www服务。" class="headerlink" title="案例二：拒绝学生宿舍访问www服务。"></a>案例二：拒绝学生宿舍访问www服务。</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">什么是www服务？万维网服务，提供WEB页面访问，协议是：http  默认端口号：80</span><br><span class="line"></span><br><span class="line">1.配置网http服务：开启服务--做网页</span><br><span class="line">2.配置DNS服务：开启服务--做A记录</span><br><span class="line">              配置DNS地址</span><br><span class="line">              测试：在客户端计算机打开命令提示符：nslookup   </span><br><span class="line"></span><br><span class="line">3、根据要求，应该用什么类型的ACL？</span><br><span class="line">   使用扩展ACL，应用在离源最近的端口,方向为in</span><br><span class="line">   第一步：配置ACL规则</span><br><span class="line">          R1(config)#access-list 100 deny  tcp 192.168.10.0 0.0.0.255 host 192.168.100.1 eq www</span><br><span class="line">          R1(config)#access-list 100 permit ip any any </span><br><span class="line"></span><br><span class="line">   第二步：应用到端口（应用在离源最近的端口，方向为in）</span><br><span class="line">          R1(config-if)#ip access-group 100 in</span><br><span class="line"></span><br><span class="line">   第三步：测试：</span><br><span class="line">          假设测试失败，怎么检查？</span><br><span class="line">           首先检查：sh ip acc</span><br><span class="line">           其次检查：是否正确的应用到了端口  sh run</span><br></pre></td></tr></table></figure></div>

<p>ARP:地址解析协议</p>
<h2 id="案例三：拒绝学生宿舍ping服务器，但可以访问网站。"><a href="#案例三：拒绝学生宿舍ping服务器，但可以访问网站。" class="headerlink" title="案例三：拒绝学生宿舍ping服务器，但可以访问网站。"></a>案例三：拒绝学生宿舍ping服务器，但可以访问网站。</h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ping服务器使用的是什么协议？ICMP</span><br><span class="line">        访问网站使用的是哪个协议？http   tcp:80</span><br><span class="line"></span><br><span class="line">        根据要求需要使用什么类型的ACL？</span><br><span class="line">        扩展ACL（应用在离源最近的端口，方向为in)</span><br><span class="line"></span><br><span class="line">        第一步：配置ACL：使用编号方式</span><br><span class="line">        R1(config)#access-list 100 deny icmp 192.168.10.0 0.0.0.255 host 192.168.100.1 echo</span><br><span class="line">        R1(config)#access-list 100 permit ip any any </span><br><span class="line">        第二步：将ACL应用到端口（应用在离源最近的端口，方向为in)</span><br><span class="line">        R1(config-if)#ip access-group 100 in</span><br><span class="line">        第三步：验证配置是否正确？</span><br><span class="line">               假设测试失败，怎么检查？</span><br><span class="line">                   首先检查：sh ip acc</span><br><span class="line">                   其次检查：是否正确的应用到了端口  sh run</span><br></pre></td></tr></table></figure></div>

<h2 id="案例四：学生宿舍不可以ping服务器，不能用www-gxa-com访问网站，但可以用地址访问网站。"><a href="#案例四：学生宿舍不可以ping服务器，不能用www-gxa-com访问网站，但可以用地址访问网站。" class="headerlink" title="案例四：学生宿舍不可以ping服务器，不能用www.gxa.com访问网站，但可以用地址访问网站。"></a>案例四：学生宿舍不可以ping服务器，不能用<a href="http://www.gxa.com访问网站，但可以用地址访问网站。" target="_blank" rel="noopener">www.gxa.com访问网站，但可以用地址访问网站。</a></h2><div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">R1(config)#access-list 120 deny icmp 192.168.10.0 0.0.0.255 host 192.168.100.1 echo</span><br><span class="line">R1(config)#access-list 120 deny udp 192.168.10.0 0.0.0.255 host 192.168.100.1 eq domain</span><br><span class="line">R1(config)#access-list 120 permit ip any any</span><br><span class="line">R1(config)#int f0&#x2F;0</span><br><span class="line">R1(config-if)#ip access-group 110 in</span><br></pre></td></tr></table></figure></div>

<h2 id="案例五：服务器提供DNS-WEB-FTP服务"><a href="#案例五：服务器提供DNS-WEB-FTP服务" class="headerlink" title="案例五：服务器提供DNS\WEB\FTP服务"></a>案例五：服务器提供DNS\WEB\FTP服务</h2><p>学生宿舍：可以访问行政楼，不允许访问财务室，只允许访问服务器的www服务（可以使用域名访问）。</p>
<p>行政楼：可以访问学生宿舍，不允许访问财务室，只允许访问服务器的www服务（可以使用域名访问）和ftp。</p>
<p>财务室：不能访问学生宿舍和行政楼，访问服务器不受限制。</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">R2(config)#access-list 100 permit tcp 192.168.10.0 0.0.0.255 host 192.168.100.1 eq www</span><br><span class="line">R2(config)#access-list 100 permit udp 192.168.10.0 0.0.0.255 host 192.168.100.1 eq domain </span><br><span class="line">R2(config)#access-list 100 permit tcp 192.168.20.0 0.0.0.255 host 192.168.100.1 eq www</span><br><span class="line">R2(config)#access-list 100 permit udp 192.168.20.0 0.0.0.255 host 192.168.100.1 eq domain </span><br><span class="line">R2(config)#access-list 100 permit tcp 192.168.20.0 0.0.0.255 host 192.168.100.1 eq ftp </span><br><span class="line">R2(config-ext-nacl)#permit ip 192.168.30.0 0.0.0.255 any </span><br><span class="line">R2(config)#int f0&#x2F;1</span><br><span class="line">R2(config-if)#ip access-group 100 out</span><br><span class="line">R2(config)#access-list 10 permit 192.168.30.0 0.0.0.255</span><br><span class="line">R2(config)#access-list 10 permit 192.168.100.0 0.0.0.255</span><br><span class="line">R2(config)#int f0&#x2F;0</span><br><span class="line">R2(config-if)#ip access-group 10 out</span><br></pre></td></tr></table></figure></div>

<h2 id="基于时间ACL的配置"><a href="#基于时间ACL的配置" class="headerlink" title="基于时间ACL的配置"></a>基于时间ACL的配置</h2><p>基于时间的 ACL 功能类似于扩展 ACL，但它允许根据时间执行访问控制。要使用基于时间的 ACL，您需要创建一个时间范围，指定一周和一天内的时段。您可以为时间范围命名，然后对相应功能应用此范围。时间限制会应用到该功能本身.</p>
<p>基于时间的ACL中配置时间的方式</p>
<p>绝对时间：</p>
<p>(config-range)#absolute start{hh:mm data month year} end {hh:mm data month year}</p>
<p>周期时间：</p>
<p>(config-range)#periodic{星期范围} {时间} to {星期范围} {时间}</p>
<p>星期范围：Monday、Tuesday、Wendnesday、Thursday、Friday、Saturday、Sundday<br>daily(每天)、weekday(每周)、weekend(周末)</p>
<p>time-range用来定义时间范围的命令</p>
<p>time-range-name时间范围名称，用来标识时间范围，以便于在后面的访问列表中引用</p>
<p>periodic主要是以星期为参数来定义时间范围的一个命令</p>
<p>Router(config-time-range)#periodic days-of-the week hh:mm to [days-of-the week] hh:mm</p>
<p>show time-range查看定义的时间范围</p>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
      <a href="/2020/02/03/%E8%B7%AF%E7%94%B1%E9%87%8D%E5%88%86%E5%B8%83%E4%B8%8E%E8%B7%AF%E5%BE%84%E6%8E%A7%E5%88%B6%20%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1%20ppp%E8%AE%A4%E8%AF%81%E5%92%8CGRE%E9%9A%A7%E9%81%93/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption"></strong>
        <div class="article-nav-title">
          
            路由重分布与路径控制 策略路由 ppp认证和GRE隧道
          
        </div>
      </a>
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2020/02/03/IP%E5%9C%B0%E5%9D%80/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">IP地址</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    <link rel="stylesheet" href="/css/gitment.css"> 
<script src="/js/gitment.js"></script>

<div id="gitmentContainer"></div>

<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        和天意乎
      
    </h3>
    <p class="avatar-slogan">
      视之不见名曰夷，听之不闻名曰希，搏之不得名曰微。此三者不可致诘，故混而为一。
    </p>
  </div>
</div>


  
    

  
    

  
    
  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/02/03/nginx%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/">nginx安全加固</a>
          </li>
        
          <li>
            <a href="/2020/02/03/apache%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/">apache安全加固</a>
          </li>
        
          <li>
            <a href="/2020/02/03/%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%8F%8A%E6%8E%A7%E5%88%B6/">远程访问及控制</a>
          </li>
        
          <li>
            <a href="/2020/02/03/%E6%9C%8D%E5%8A%A1%E4%B8%8E%E8%BF%9B%E7%A8%8B,%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB/">服务与进程,文件共享</a>
          </li>
        
          <li>
            <a href="/2020/02/03/DHCP%E9%85%8D%E7%BD%AE%EF%BC%9A/">DHCP配置：</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 John Doe &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity" target="_blank" rel="noopener">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>